<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>MongoDBCDriver: MongoDB C Driver</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li id="current"><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<h1>MongoDB C Driver</h1>
<p>
<h3 align="center">0.3 </h3><a href="http://www.mongodb.org/display/DOCS/C+Language+CenterThe">http://www.mongodb.org/display/DOCS/C+Language+CenterThe</a> MongoDB C Driver is the 10gen-supported driver for MongoDB.<p>
Add discussion and more examples here.<p>
Example code:<p>
<div class="fragment"><pre class="fragment"><span class="preprocessor">#include "test.h"</span>
<span class="preprocessor">#include "<a class="code" href="bson_8h.html">bson.h</a>"</span>
<span class="preprocessor">#include &lt;stdio.h&gt;</span>
<span class="preprocessor">#include &lt;string.h&gt;</span>
<span class="preprocessor">#include &lt;stdlib.h&gt;</span>

<span class="keywordtype">int</span> main(){
    bson_buffer bb;
    bson b, sub;
    bson_iterator it;

    <span class="comment">/* Create a rich document like this one:</span>
<span class="comment"></span>
<span class="comment"> { _id: ObjectId("4d95ea712b752328eb2fc2cc"),</span>
<span class="comment">   user_id: ObjectId("4d95ea712b752328eb2fc2cd"),</span>
<span class="comment"></span>
<span class="comment">   items: [</span>
<span class="comment">     { sku: "col-123",</span>
<span class="comment">       name: "John Coltrane: Impressions",</span>
<span class="comment">       price: 1099,</span>
<span class="comment">     },</span>
<span class="comment"></span>
<span class="comment">     { sku: "young-456",</span>
<span class="comment">       name: "Larry Young: Unity",</span>
<span class="comment">       price: 1199</span>
<span class="comment">     }</span>
<span class="comment">   ],</span>
<span class="comment"></span>
<span class="comment">   address: {</span>
<span class="comment">     street: "59 18th St.",</span>
<span class="comment">     zip: 10010</span>
<span class="comment">   },</span>
<span class="comment"></span>
<span class="comment">   total: 2298</span>
<span class="comment"> }</span>
<span class="comment">     */</span>
    bson_buffer_init( &amp;bb );
    bson_append_new_oid( &amp;bb, <span class="stringliteral">"_id"</span> );
    bson_append_new_oid( &amp;bb, <span class="stringliteral">"user_id"</span> );

    bson_append_start_array( &amp;bb, <span class="stringliteral">"items"</span> );
        bson_append_start_object( &amp;bb, <span class="stringliteral">"0"</span> );
            bson_append_string( &amp;bb, <span class="stringliteral">"name"</span>, <span class="stringliteral">"John Coltrane: Impressions"</span> );
            bson_append_int( &amp;bb, <span class="stringliteral">"price"</span>, 1099 );
        bson_append_finish_object( &amp;bb );

        bson_append_start_object( &amp;bb, <span class="stringliteral">"1"</span> );
            bson_append_string( &amp;bb, <span class="stringliteral">"name"</span>, <span class="stringliteral">"Larry Young: Unity"</span> );
            bson_append_int( &amp;bb, <span class="stringliteral">"price"</span>, 1199 );
        bson_append_finish_object( &amp;bb );
    bson_append_finish_object( &amp;bb );

    bson_append_start_object( &amp;bb, <span class="stringliteral">"address"</span> );
        bson_append_string( &amp;bb, <span class="stringliteral">"street"</span>, <span class="stringliteral">"59 18th St."</span> );
        bson_append_int( &amp;bb, <span class="stringliteral">"zip"</span>, 10010 );
    bson_append_finish_object( &amp;bb );

    bson_append_int( &amp;bb, <span class="stringliteral">"total"</span>, 2298 );

    <span class="comment">/* Convert from a buffer to a raw BSON object that</span>
<span class="comment"> can be sent to the server:</span>
<span class="comment">     */</span>
    bson_from_buffer( &amp;b, &amp;bb );

    <span class="comment">/* Advance to the 'items' array */</span>
    bson_find( &amp;it, &amp;b, <span class="stringliteral">"items"</span> );

    <span class="comment">/* Get the subobject representing items */</span>
    bson_iterator_subobject( &amp;it, &amp;sub );

    <span class="comment">/* Now iterate that object */</span>
    bson_print( &amp;sub );

   <span class="keywordflow">return</span> 0;
}
</pre></div> <hr size="1"><address style="align: right;"><small>Generated on Fri Apr 22 09:50:59 2011 for MongoDBCDriver by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
