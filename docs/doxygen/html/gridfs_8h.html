<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>MongoDBCDriver: gridfs.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<h1>gridfs.h File Reference</h1>GridFS Declarations. <a href="#_details">More...</a>
<p>
<code>#include &quot;<a class="el" href="mongo_8h-source.html">mongo.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="bson_8h-source.html">bson.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="platform__hacks_8h-source.html">platform_hacks.h</a>&quot;</code><br>
<code>#include &lt;stdio.h&gt;</code><br>

<p>
<a href="gridfs_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><b>gridfs</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><b>gridfile</b></td></tr>

<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="0af8bc85e021e3894287df8a98e6a72e"></a><!-- doxytag: member="gridfs.h::gridfs_offset" ref="0af8bc85e021e3894287df8a98e6a72e" args="" -->
typedef uint64_t&nbsp;</td><td class="memItemRight" valign="bottom"><b>gridfs_offset</b></td></tr>

<tr><td colspan="2"><br><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom">{ <b>DEFAULT_CHUNK_SIZE</b> =  256 * 1024
 }</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#103debc0d8ad798eb613baf74c64c52a">gridfs_init</a> (mongo_connection *client, const char *dbname, const char *prefix, gridfs *gfs)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes a GridFS object.  <a href="#103debc0d8ad798eb613baf74c64c52a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="10ee96fb8a0d014f443efc6f501e8494"></a><!-- doxytag: member="gridfs.h::gridfs_destroy" ref="10ee96fb8a0d014f443efc6f501e8494" args="(gridfs *gfs)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#10ee96fb8a0d014f443efc6f501e8494">gridfs_destroy</a> (gridfs *gfs)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destroys a GridFS object. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#357d562e2eb8647e32c9737e56e3e911">gridfile_writer_init</a> (gridfile *gfile, gridfs *gfs, const char *remote_name, const char *content_type)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes a gridfile for writing incrementally with gridfs_write_buffer.  <a href="#357d562e2eb8647e32c9737e56e3e911"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#648434c8644a1a220383765ffc6999ec">gridfile_write_buffer</a> (gridfile *gfile, const char *data, gridfs_offset length)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write to a GridFS file incrementally.  <a href="#648434c8644a1a220383765ffc6999ec"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bson&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#030101e0b0867acb28fdc2345fdc7bc4">gridfile_writer_done</a> (gridfile *gfile)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Signal that writing of this gridfile is complete by writing any buffered chunks along with the entry in the files collection.  <a href="#030101e0b0867acb28fdc2345fdc7bc4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bson&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#18aaca75b5a78a56150aa603adfda3c6">gridfs_store_buffer</a> (gridfs *gfs, const char *data, gridfs_offset length, const char *remotename, const char *contenttype)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Store a buffer as a GridFS file.  <a href="#18aaca75b5a78a56150aa603adfda3c6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bson&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#af64ce80e06625ccbf07e6fb11c8ee6c">gridfs_store_file</a> (gridfs *gfs, const char *filename, const char *remotename, const char *contenttype)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Open the file referenced by filename and store it as a GridFS file.  <a href="#af64ce80e06625ccbf07e6fb11c8ee6c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#2410badfa933a34b74ed6d976d45889d">gridfs_remove_filename</a> (gridfs *gfs, const char *filename)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Removes the files referenced by filename from the db.  <a href="#2410badfa933a34b74ed6d976d45889d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#b487b10abbae1f448fc760c6fca94f3f">gridfs_find_query</a> (gridfs *gfs, bson *query, gridfile *gfile)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Find the first query within the GridFS and return it as a GridFile.  <a href="#b487b10abbae1f448fc760c6fca94f3f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#c44fdd22ea2f0cd0393d0a8b98206203">gridfs_find_filename</a> (gridfs *gfs, const char *filename, gridfile *gfile)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Find the first file referenced by filename within the GridFS and return it as a GridFile.  <a href="#c44fdd22ea2f0cd0393d0a8b98206203"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#d65002de1cd6fee014cd58364622d142">gridfile_init</a> (gridfs *gfs, bson *meta, gridfile *gfile)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes a GridFile containing the GridFS and file bson.  <a href="#d65002de1cd6fee014cd58364622d142"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#c98b40fc7c7c7cbfd7896b68ef2fe5e2">gridfile_destroy</a> (gridfile *gfile)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destroys the GridFile.  <a href="#c98b40fc7c7c7cbfd7896b68ef2fe5e2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#d17af5fcb009eec0337d64ec6ea9dec5">gridfile_exists</a> (gridfile *gfile)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns whether or not the GridFile exists.  <a href="#d17af5fcb009eec0337d64ec6ea9dec5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#da39959312754244e75bd61f02f0d09e">gridfile_get_filename</a> (gridfile *gfile)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the filename of GridFile.  <a href="#da39959312754244e75bd61f02f0d09e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#ac6d8923b623e3b4504e14a6ecf1942b">gridfile_get_chunksize</a> (gridfile *gfile)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the size of the chunks of the GridFile.  <a href="#ac6d8923b623e3b4504e14a6ecf1942b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">gridfs_offset&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#5bc451e7856966b4d4e09ca3c16b26eb">gridfile_get_contentlength</a> (gridfile *gfile)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the length of GridFile's data.  <a href="#5bc451e7856966b4d4e09ca3c16b26eb"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#3c185ba67da7a82e37ea03fe2480ff18">gridfile_get_contenttype</a> (gridfile *gfile)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the MIME type of the GridFile.  <a href="#3c185ba67da7a82e37ea03fe2480ff18"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bson_date_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#7261902cceb40949a977c4782e5353c9">gridfile_get_uploaddate</a> (gridfile *gfile)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the upload date of GridFile.  <a href="#7261902cceb40949a977c4782e5353c9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#ff8c5401b34f9581893426ba9a77fe41">gridfile_get_md5</a> (gridfile *gfile)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the MD5 of GridFile.  <a href="#ff8c5401b34f9581893426ba9a77fe41"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#03a6b31fa1b7673ed0693f4a58693f8a">gridfile_get_field</a> (gridfile *gfile, const char *name)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the field in GridFile specified by name.  <a href="#03a6b31fa1b7673ed0693f4a58693f8a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bson_bool_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#3d86c9cf4417e185451e9404234e00ff">gridfile_get_boolean</a> (gridfile *gfile, const char *name)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns a boolean field in GridFile specified by name.  <a href="#3d86c9cf4417e185451e9404234e00ff"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bson&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#387cf713cb7269955d91fbfacf5e88a8">gridfile_get_metadata</a> (gridfile *gfile)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the metadata of GridFile.  <a href="#387cf713cb7269955d91fbfacf5e88a8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#e317f5625ef2124455739e7fdd3fc09b">gridfile_get_numchunks</a> (gridfile *gfile)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the number of chunks in the GridFile.  <a href="#e317f5625ef2124455739e7fdd3fc09b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bson&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#bde638946662e0a0b935118ea1e173e4">gridfile_get_chunk</a> (gridfile *gfile, int n)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns chunk n of GridFile.  <a href="#bde638946662e0a0b935118ea1e173e4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">mongo_cursor *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#89879597c585375d8d4bf50a810cedd6">gridfile_get_chunks</a> (gridfile *gfile, int start, int size)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns a mongo_cursor of *size* chunks starting with chunk *start*.  <a href="#89879597c585375d8d4bf50a810cedd6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">gridfs_offset&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#72d5c8b6714b66cb83bf8981fef6984a">gridfile_write_file</a> (gridfile *gfile, FILE *stream)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Writes the GridFile to a stream.  <a href="#72d5c8b6714b66cb83bf8981fef6984a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">gridfs_offset&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#dd4670749692f3ea0a0839b4b405f553">gridfile_read</a> (gridfile *gfile, gridfs_offset size, char *buf)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reads length bytes from the GridFile to a buffer and updates the position in the file.  <a href="#dd4670749692f3ea0a0839b4b405f553"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">gridfs_offset&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="gridfs_8h.html#26b28b81fe06ade342eebd7126adb74a">gridfile_seek</a> (gridfile *gfile, gridfs_offset offset)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Updates the position in the file (If the offset goes beyond the contentlength, the position is updated to the end of the file.  <a href="#26b28b81fe06ade342eebd7126adb74a"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
GridFS Declarations. 
<p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="c98b40fc7c7c7cbfd7896b68ef2fe5e2"></a><!-- doxytag: member="gridfs.h::gridfile_destroy" ref="c98b40fc7c7c7cbfd7896b68ef2fe5e2" args="(gridfile *gfile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gridfile_destroy           </td>
          <td>(</td>
          <td class="paramtype">gridfile *&nbsp;</td>
          <td class="paramname"> <em>gfile</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroys the GridFile. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>oGridFIle</em>&nbsp;</td><td>- the GridFile being destroyed </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="d17af5fcb009eec0337d64ec6ea9dec5"></a><!-- doxytag: member="gridfs.h::gridfile_exists" ref="d17af5fcb009eec0337d64ec6ea9dec5" args="(gridfile *gfile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gridfile_exists           </td>
          <td>(</td>
          <td class="paramtype">gridfile *&nbsp;</td>
          <td class="paramname"> <em>gfile</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns whether or not the GridFile exists. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfile</em>&nbsp;</td><td>- the GridFile being examined </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="3d86c9cf4417e185451e9404234e00ff"></a><!-- doxytag: member="gridfs.h::gridfile_get_boolean" ref="3d86c9cf4417e185451e9404234e00ff" args="(gridfile *gfile, const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bson_bool_t gridfile_get_boolean           </td>
          <td>(</td>
          <td class="paramtype">gridfile *&nbsp;</td>
          <td class="paramname"> <em>gfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns a boolean field in GridFile specified by name. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfile</em>&nbsp;</td><td>- the working GridFile </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>- the name of the field to be returned </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>- the boolean of the field specified (NULL if none exists) </dd></dl>

</div>
</div><p>
<a class="anchor" name="bde638946662e0a0b935118ea1e173e4"></a><!-- doxytag: member="gridfs.h::gridfile_get_chunk" ref="bde638946662e0a0b935118ea1e173e4" args="(gridfile *gfile, int n)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bson gridfile_get_chunk           </td>
          <td>(</td>
          <td class="paramtype">gridfile *&nbsp;</td>
          <td class="paramname"> <em>gfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>n</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns chunk n of GridFile. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfile</em>&nbsp;</td><td>- the working GridFile </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>- the nth chunk of the Gridfile </dd></dl>

</div>
</div><p>
<a class="anchor" name="89879597c585375d8d4bf50a810cedd6"></a><!-- doxytag: member="gridfs.h::gridfile_get_chunks" ref="89879597c585375d8d4bf50a810cedd6" args="(gridfile *gfile, int start, int size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mongo_cursor* gridfile_get_chunks           </td>
          <td>(</td>
          <td class="paramtype">gridfile *&nbsp;</td>
          <td class="paramname"> <em>gfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns a mongo_cursor of *size* chunks starting with chunk *start*. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfile</em>&nbsp;</td><td>- the working GridFile </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>start</em>&nbsp;</td><td>- the first chunk in the cursor </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>- the number of chunks to be returned </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>- mongo_cursor of the chunks (must be destroyed after use) </dd></dl>

</div>
</div><p>
<a class="anchor" name="ac6d8923b623e3b4504e14a6ecf1942b"></a><!-- doxytag: member="gridfs.h::gridfile_get_chunksize" ref="ac6d8923b623e3b4504e14a6ecf1942b" args="(gridfile *gfile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gridfile_get_chunksize           </td>
          <td>(</td>
          <td class="paramtype">gridfile *&nbsp;</td>
          <td class="paramname"> <em>gfile</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the size of the chunks of the GridFile. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfile</em>&nbsp;</td><td>- the working GridFile </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>- the size of the chunks of the Gridfile </dd></dl>

</div>
</div><p>
<a class="anchor" name="5bc451e7856966b4d4e09ca3c16b26eb"></a><!-- doxytag: member="gridfs.h::gridfile_get_contentlength" ref="5bc451e7856966b4d4e09ca3c16b26eb" args="(gridfile *gfile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gridfs_offset gridfile_get_contentlength           </td>
          <td>(</td>
          <td class="paramtype">gridfile *&nbsp;</td>
          <td class="paramname"> <em>gfile</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the length of GridFile's data. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfile</em>&nbsp;</td><td>- the working GridFile </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>- the length of the Gridfile's data </dd></dl>

</div>
</div><p>
<a class="anchor" name="3c185ba67da7a82e37ea03fe2480ff18"></a><!-- doxytag: member="gridfs.h::gridfile_get_contenttype" ref="3c185ba67da7a82e37ea03fe2480ff18" args="(gridfile *gfile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* gridfile_get_contenttype           </td>
          <td>(</td>
          <td class="paramtype">gridfile *&nbsp;</td>
          <td class="paramname"> <em>gfile</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the MIME type of the GridFile. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfile</em>&nbsp;</td><td>- the working GridFile </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>- the MIME type of the Gridfile (NULL if no type specified) </dd></dl>

</div>
</div><p>
<a class="anchor" name="03a6b31fa1b7673ed0693f4a58693f8a"></a><!-- doxytag: member="gridfs.h::gridfile_get_field" ref="03a6b31fa1b7673ed0693f4a58693f8a" args="(gridfile *gfile, const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* gridfile_get_field           </td>
          <td>(</td>
          <td class="paramtype">gridfile *&nbsp;</td>
          <td class="paramname"> <em>gfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the field in GridFile specified by name. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfile</em>&nbsp;</td><td>- the working GridFile </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>- the name of the field to be returned </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>- the data of the field specified (NULL if none exists) </dd></dl>

</div>
</div><p>
<a class="anchor" name="da39959312754244e75bd61f02f0d09e"></a><!-- doxytag: member="gridfs.h::gridfile_get_filename" ref="da39959312754244e75bd61f02f0d09e" args="(gridfile *gfile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* gridfile_get_filename           </td>
          <td>(</td>
          <td class="paramtype">gridfile *&nbsp;</td>
          <td class="paramname"> <em>gfile</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the filename of GridFile. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfile</em>&nbsp;</td><td>- the working GridFile </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>- the filename of the Gridfile </dd></dl>

</div>
</div><p>
<a class="anchor" name="ff8c5401b34f9581893426ba9a77fe41"></a><!-- doxytag: member="gridfs.h::gridfile_get_md5" ref="ff8c5401b34f9581893426ba9a77fe41" args="(gridfile *gfile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* gridfile_get_md5           </td>
          <td>(</td>
          <td class="paramtype">gridfile *&nbsp;</td>
          <td class="paramname"> <em>gfile</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the MD5 of GridFile. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfile</em>&nbsp;</td><td>- the working GridFile </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>- the MD5 of the Gridfile </dd></dl>

</div>
</div><p>
<a class="anchor" name="387cf713cb7269955d91fbfacf5e88a8"></a><!-- doxytag: member="gridfs.h::gridfile_get_metadata" ref="387cf713cb7269955d91fbfacf5e88a8" args="(gridfile *gfile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bson gridfile_get_metadata           </td>
          <td>(</td>
          <td class="paramtype">gridfile *&nbsp;</td>
          <td class="paramname"> <em>gfile</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the metadata of GridFile. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfile</em>&nbsp;</td><td>- the working GridFile </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>- the metadata of the Gridfile in a bson object (an empty bson is returned if none exists) </dd></dl>

</div>
</div><p>
<a class="anchor" name="e317f5625ef2124455739e7fdd3fc09b"></a><!-- doxytag: member="gridfs.h::gridfile_get_numchunks" ref="e317f5625ef2124455739e7fdd3fc09b" args="(gridfile *gfile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gridfile_get_numchunks           </td>
          <td>(</td>
          <td class="paramtype">gridfile *&nbsp;</td>
          <td class="paramname"> <em>gfile</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the number of chunks in the GridFile. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfile</em>&nbsp;</td><td>- the working GridFile </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>- the number of chunks in the Gridfile </dd></dl>

</div>
</div><p>
<a class="anchor" name="7261902cceb40949a977c4782e5353c9"></a><!-- doxytag: member="gridfs.h::gridfile_get_uploaddate" ref="7261902cceb40949a977c4782e5353c9" args="(gridfile *gfile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bson_date_t gridfile_get_uploaddate           </td>
          <td>(</td>
          <td class="paramtype">gridfile *&nbsp;</td>
          <td class="paramname"> <em>gfile</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the upload date of GridFile. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfile</em>&nbsp;</td><td>- the working GridFile </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>- the upload date of the Gridfile </dd></dl>

</div>
</div><p>
<a class="anchor" name="d65002de1cd6fee014cd58364622d142"></a><!-- doxytag: member="gridfs.h::gridfile_init" ref="d65002de1cd6fee014cd58364622d142" args="(gridfs *gfs, bson *meta, gridfile *gfile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gridfile_init           </td>
          <td>(</td>
          <td class="paramtype">gridfs *&nbsp;</td>
          <td class="paramname"> <em>gfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bson *&nbsp;</td>
          <td class="paramname"> <em>meta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gridfile *&nbsp;</td>
          <td class="paramname"> <em>gfile</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initializes a GridFile containing the GridFS and file bson. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfs</em>&nbsp;</td><td>- the GridFS where the GridFile is located </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>meta</em>&nbsp;</td><td>- the file object </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>gfile</em>&nbsp;</td><td>- the output GridFile that is being initialized </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>1 if successful, 0 otherwise </dd></dl>

</div>
</div><p>
<a class="anchor" name="dd4670749692f3ea0a0839b4b405f553"></a><!-- doxytag: member="gridfs.h::gridfile_read" ref="dd4670749692f3ea0a0839b4b405f553" args="(gridfile *gfile, gridfs_offset size, char *buf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gridfs_offset gridfile_read           </td>
          <td>(</td>
          <td class="paramtype">gridfile *&nbsp;</td>
          <td class="paramname"> <em>gfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gridfs_offset&nbsp;</td>
          <td class="paramname"> <em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>buf</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Reads length bytes from the GridFile to a buffer and updates the position in the file. 
<p>
(assumes the buffer is large enough) (if size is greater than EOF gridfile_read reads until EOF) <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfile</em>&nbsp;</td><td>- the working GridFile </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>- the amount of bytes to be read </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>- the buffer to read to </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>- the number of bytes read </dd></dl>

</div>
</div><p>
<a class="anchor" name="26b28b81fe06ade342eebd7126adb74a"></a><!-- doxytag: member="gridfs.h::gridfile_seek" ref="26b28b81fe06ade342eebd7126adb74a" args="(gridfile *gfile, gridfs_offset offset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gridfs_offset gridfile_seek           </td>
          <td>(</td>
          <td class="paramtype">gridfile *&nbsp;</td>
          <td class="paramname"> <em>gfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gridfs_offset&nbsp;</td>
          <td class="paramname"> <em>offset</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Updates the position in the file (If the offset goes beyond the contentlength, the position is updated to the end of the file. 
<p>
) <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfile</em>&nbsp;</td><td>- the working GridFile </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>offset</em>&nbsp;</td><td>- the position to update to </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>- resulting offset location </dd></dl>

</div>
</div><p>
<a class="anchor" name="648434c8644a1a220383765ffc6999ec"></a><!-- doxytag: member="gridfs.h::gridfile_write_buffer" ref="648434c8644a1a220383765ffc6999ec" args="(gridfile *gfile, const char *data, gridfs_offset length)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gridfile_write_buffer           </td>
          <td>(</td>
          <td class="paramtype">gridfile *&nbsp;</td>
          <td class="paramname"> <em>gfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gridfs_offset&nbsp;</td>
          <td class="paramname"> <em>length</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Write to a GridFS file incrementally. 
<p>
You can call this function any number of times with a new buffer each time. This allows you to effectively stream to a GridFS file. When finished, be sure to call gridfs_writer_done.<p>
<dl compact><dt><b>Returns:</b></dt><dd>- 1 if successful, 0 otherwise </dd></dl>

</div>
</div><p>
<a class="anchor" name="72d5c8b6714b66cb83bf8981fef6984a"></a><!-- doxytag: member="gridfs.h::gridfile_write_file" ref="72d5c8b6714b66cb83bf8981fef6984a" args="(gridfile *gfile, FILE *stream)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gridfs_offset gridfile_write_file           </td>
          <td>(</td>
          <td class="paramtype">gridfile *&nbsp;</td>
          <td class="paramname"> <em>gfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&nbsp;</td>
          <td class="paramname"> <em>stream</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Writes the GridFile to a stream. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfile</em>&nbsp;</td><td>- the working GridFile </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>stream</em>&nbsp;</td><td>- the file stream to write to </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="030101e0b0867acb28fdc2345fdc7bc4"></a><!-- doxytag: member="gridfs.h::gridfile_writer_done" ref="030101e0b0867acb28fdc2345fdc7bc4" args="(gridfile *gfile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bson gridfile_writer_done           </td>
          <td>(</td>
          <td class="paramtype">gridfile *&nbsp;</td>
          <td class="paramname"> <em>gfile</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Signal that writing of this gridfile is complete by writing any buffered chunks along with the entry in the files collection. 
<p>
<dl compact><dt><b>Returns:</b></dt><dd>- the file object if successful; otherwise 0. </dd></dl>

</div>
</div><p>
<a class="anchor" name="357d562e2eb8647e32c9737e56e3e911"></a><!-- doxytag: member="gridfs.h::gridfile_writer_init" ref="357d562e2eb8647e32c9737e56e3e911" args="(gridfile *gfile, gridfs *gfs, const char *remote_name, const char *content_type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gridfile_writer_init           </td>
          <td>(</td>
          <td class="paramtype">gridfile *&nbsp;</td>
          <td class="paramname"> <em>gfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gridfs *&nbsp;</td>
          <td class="paramname"> <em>gfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>remote_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>content_type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initializes a gridfile for writing incrementally with gridfs_write_buffer. 
<p>
Once initialized, you can write any number of buffers with gridfs_write_buffer. When done, you must call gridfs_writer_done to save the file metadata.<p>
<dl compact><dt><b>Returns:</b></dt><dd>- 1 if successful, 0 otherwise </dd></dl>

</div>
</div><p>
<a class="anchor" name="c44fdd22ea2f0cd0393d0a8b98206203"></a><!-- doxytag: member="gridfs.h::gridfs_find_filename" ref="c44fdd22ea2f0cd0393d0a8b98206203" args="(gridfs *gfs, const char *filename, gridfile *gfile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gridfs_find_filename           </td>
          <td>(</td>
          <td class="paramtype">gridfs *&nbsp;</td>
          <td class="paramname"> <em>gfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gridfile *&nbsp;</td>
          <td class="paramname"> <em>gfile</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Find the first file referenced by filename within the GridFS and return it as a GridFile. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfs</em>&nbsp;</td><td>- the working GridFS </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>filename</em>&nbsp;</td><td>- filename of the file to find </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>gfile</em>&nbsp;</td><td>- the output GridFile to be intialized </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>1 if successful, 0 otherwise </dd></dl>

</div>
</div><p>
<a class="anchor" name="b487b10abbae1f448fc760c6fca94f3f"></a><!-- doxytag: member="gridfs.h::gridfs_find_query" ref="b487b10abbae1f448fc760c6fca94f3f" args="(gridfs *gfs, bson *query, gridfile *gfile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gridfs_find_query           </td>
          <td>(</td>
          <td class="paramtype">gridfs *&nbsp;</td>
          <td class="paramname"> <em>gfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bson *&nbsp;</td>
          <td class="paramname"> <em>query</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gridfile *&nbsp;</td>
          <td class="paramname"> <em>gfile</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Find the first query within the GridFS and return it as a GridFile. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfs</em>&nbsp;</td><td>- the working GridFS </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>query</em>&nbsp;</td><td>- a pointer to the bson with the query data </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>gfile</em>&nbsp;</td><td>- the output GridFile to be initialized </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>1 if successful, 0 otherwise </dd></dl>

</div>
</div><p>
<a class="anchor" name="103debc0d8ad798eb613baf74c64c52a"></a><!-- doxytag: member="gridfs.h::gridfs_init" ref="103debc0d8ad798eb613baf74c64c52a" args="(mongo_connection *client, const char *dbname, const char *prefix, gridfs *gfs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gridfs_init           </td>
          <td>(</td>
          <td class="paramtype">mongo_connection *&nbsp;</td>
          <td class="paramname"> <em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>dbname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gridfs *&nbsp;</td>
          <td class="paramname"> <em>gfs</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initializes a GridFS object. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>client</em>&nbsp;</td><td>- db connection </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dbname</em>&nbsp;</td><td>- database name </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>prefix</em>&nbsp;</td><td>- collection prefix, default is fs if NULL or empty </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>gfs</em>&nbsp;</td><td>- the GridFS object to initialize </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>- 1 if successful, 0 otherwise </dd></dl>

</div>
</div><p>
<a class="anchor" name="2410badfa933a34b74ed6d976d45889d"></a><!-- doxytag: member="gridfs.h::gridfs_remove_filename" ref="2410badfa933a34b74ed6d976d45889d" args="(gridfs *gfs, const char *filename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gridfs_remove_filename           </td>
          <td>(</td>
          <td class="paramtype">gridfs *&nbsp;</td>
          <td class="paramname"> <em>gfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>filename</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Removes the files referenced by filename from the db. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfs</em>&nbsp;</td><td>- the working GridFS </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>filename</em>&nbsp;</td><td>- the filename of the file/s to be removed </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="18aaca75b5a78a56150aa603adfda3c6"></a><!-- doxytag: member="gridfs.h::gridfs_store_buffer" ref="18aaca75b5a78a56150aa603adfda3c6" args="(gridfs *gfs, const char *data, gridfs_offset length, const char *remotename, const char *contenttype)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bson gridfs_store_buffer           </td>
          <td>(</td>
          <td class="paramtype">gridfs *&nbsp;</td>
          <td class="paramname"> <em>gfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gridfs_offset&nbsp;</td>
          <td class="paramname"> <em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>remotename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>contenttype</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Store a buffer as a GridFS file. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfs</em>&nbsp;</td><td>- the working GridFS </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>- pointer to buffer to store in GridFS </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>length</em>&nbsp;</td><td>- length of the buffer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>remotename</em>&nbsp;</td><td>- filename for use in the database </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>contenttype</em>&nbsp;</td><td>- optional MIME type for this object </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>- the file object </dd></dl>

</div>
</div><p>
<a class="anchor" name="af64ce80e06625ccbf07e6fb11c8ee6c"></a><!-- doxytag: member="gridfs.h::gridfs_store_file" ref="af64ce80e06625ccbf07e6fb11c8ee6c" args="(gridfs *gfs, const char *filename, const char *remotename, const char *contenttype)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bson gridfs_store_file           </td>
          <td>(</td>
          <td class="paramtype">gridfs *&nbsp;</td>
          <td class="paramname"> <em>gfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>remotename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>contenttype</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Open the file referenced by filename and store it as a GridFS file. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>gfs</em>&nbsp;</td><td>- the working GridFS </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>filename</em>&nbsp;</td><td>- local filename relative to the process </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>remotename</em>&nbsp;</td><td>- optional filename for use in the database </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>contenttype</em>&nbsp;</td><td>- optional MIME type for this object </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>- the file object </dd></dl>

</div>
</div><p>
<hr size="1"><address style="align: right;"><small>Generated on Fri Apr 22 09:50:59 2011 for MongoDBCDriver by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
